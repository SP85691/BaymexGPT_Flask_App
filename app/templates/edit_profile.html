{% extends 'base.html' %}
{% block title %}
<title>Edit Profile</title>
{% endblock %}
{% block content %}
{% include 'header.html' %}

<div class="mt-10 mb-[3%] bg-gray-900 sm:mx-32 lg:mx-32 xl:mx-72 border rounded-2xl">
    <div class="flex justify-between container mx-auto">
        <div class="w-full">
            <div class="mt-4 px-4 m-5">

                <form>
                    <div class="space-y-12">
                        <div class="border-b border-gray-900/10 pb-12">
                            <h2 class="text-base text-white font-semibold leading-7">Profile</h2>
                            <p class="mt-1 text-sm leading-6 text-gray-600">This information will be displayed publicly
                                so be careful what you share.</p>

                            <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                                <div class="col-span-full">
                                    <label for="photo"
                                        class="block text-sm font-medium leading-6 text-white">Photo</label>
                                    <div class="mt-2 flex items-center gap-x-3">
                                        <svg class="h-12 w-12 text-gray-300" viewBox="0 0 24 24" fill="currentColor"
                                            aria-hidden="true">
                                            <path fill-rule="evenodd"
                                                d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
                                                clip-rule="evenodd" />
                                        </svg>

                                        <input id="image" type="file" placeholder="Change" value="{{ image }}"
                                            class="rounded-md bg-violet-500 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-violet-400 hover:bg-violet-600"></input>
                                    </div>
                                </div>

                                <div class="sm:col-span-4">
                                    <label for="username"
                                        class="block text-sm font-medium leading-6 text-white">Username</label>
                                    <div class="mt-2">
                                        <div
                                            class="flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md">
                                            <span
                                                class="flex select-none items-center pl-3 text-gray-500 sm:text-sm">baymexgpt.ai/</span>
                                            <input type="text" name="username" id="username" value="{{username}}"
                                                autocomplete="username"
                                                class="block flex-1 border-0 bg-transparent py-1.5 pl-1 text-white placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"
                                                placeholder="janesmith">
                                        </div>
                                    </div>
                                </div>

                                <div class="sm:col-span-4">
                                    <label for="name"
                                        class="block text-sm font-medium leading-6 text-white">Name</label>
                                    <div class="mt-2">
                                        <div
                                            class="flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md">
                                            <input type="text" name="username" id="username" value="{{name if name}}"
                                                readonly autocomplete="username"
                                                class="block pl-3 flex-1 border-0 bg-transparent py-1.5 text-white placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"
                                                placeholder="janesmith">
                                        </div>
                                    </div>
                                </div>

                                <div class="sm:col-span-4">
                                    <label for="email"
                                        class="block text-sm font-medium leading-6 text-white">Email</label>
                                    <div class="mt-2">
                                        <div
                                            class="flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md">
                                            <input type="email" name="email" id="email" value="{{email if email}}"
                                                readonly autocomplete="email"
                                                class="block pl-3 flex-1 border-0 bg-transparent py-1.5 text-white placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"
                                                placeholder="janesmith">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-span-full">
                                    <label for="about"
                                        class="block text-sm font-medium leading-6 text-white">About</label>
                                    <p class="mt-1 text-sm leading-6 text-gray-600">Write a few sentences about
                                        yourself.</p>
                                    <div class="mt-2">
                                        <textarea id="about" name="about" rows="3" value="{{ about }}"
                                            placeholder="{{about if about}}"
                                            class="block w-full bg-transparent rounded-md border-0 py-1.5 pl-3 text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></textarea>
                                        </div>
                                </div>

                            </div>
                        </div>
                        <div class="border-b border-gray-900/10 pb-12">
                            <h2 class="text-base font-semibold leading-7 text-white">Personal Information</h2>
                            <p class="mt-1 text-sm leading-6 text-gray-600">Use a permanent address where you can
                                receive mail.</p>

                            <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                                <div class="sm:col-span-4">
                                    <label for="profession"
                                        class="block text-sm font-medium leading-6 text-white">Profession</label>
                                    <div class="mt-2">
                                        <select id="profession" name="profession" autocomplete="profession-type"
                                            class="block w-full pl-2 rounded-md border-0 py-1.5 bg-gray-800 text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6">
                                            <option>Student</option>
                                            <option>Private Employee</option>
                                            <option>Businessman</option>
                                            <option>Professor</option>
                                            <option>Unemployed</option>
                                            <option>Other</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="sm:col-span-4">
                                    <label for="company"
                                        class="block text-sm font-medium leading-6 text-white">Company/School
                                        Name</label>
                                    <div class="mt-2">
                                        <div
                                            class="flex shadow-sm rounded-lg focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md">
                                            <input type="text" name="company" id="company" value="{{ company }}"
                                                autocomplete="company"
                                                class="block pl-3 flex-1 ring-1 ring-inset ring-gray-300 rounded-lg bg-gray-800 border-b-gray-100 py-1.5 text-white placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"
                                                placeholder="Google">
                                        </div>
                                    </div>
                                </div>

                                <div class="sm:col-span-3">
                                    <label for="country"
                                        class="block text-sm font-medium leading-6 text-white">Country</label>
                                    <div class="mt-2">
                                        <select id="country" name="country" autocomplete="country-name"
                                            class="block w-full pl-2 rounded-md border-0 py-1.5 bg-gray-800 text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6">
                                            <option>United States</option>
                                            <option>Canada</option>
                                            <option>Mexico</option>
                                            <option>India</option>
                                            <option>Japan</option>
                                            <option>Germany</option>
                                            <option>Australia</option>
                                            <option>South Korea</option>
                                            <option>UAE</option>
                                            <option>Africa</option>
                                            <option>Thailand</option>
                                            <option>Taiwan</option>
                                            <option>China</option>
                                            <option>France</option>
                                            <option>Switzerland</option>
                                            <option>Brazil</option>
                                            <option>United Kindom</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="sm:col-span-4">
                                    <label for="phone" class="block text-sm font-medium leading-6 text-white">Phone
                                        Number</label>
                                    <div class="mt-2">
                                        <div
                                            class="flex shadow-sm rounded-lg focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md">
                                            <input type="number" name="phone" id="phone" value="{{phone if phone}}"
                                                autocomplete="phone"
                                                class="block pl-3 flex-1 ring-1 ring-inset ring-gray-300 rounded-lg bg-gray-800 border-b-gray-100 py-1.5 text-white placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6"
                                                placeholder="+91 851XX XXXXX">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-span-full">
                                    <label for="street-address"
                                        class="block text-sm font-medium leading-6 text-white">Street address</label>
                                    <div class="mt-2">
                                        <input type="text" name="street-address" id="street-address"
                                            placeholder="Brook Villa, Los Santos" autocomplete="street-address"
                                            value="{{ address }}"
                                            class="block w-full rounded-md border-0 py-1.5 pl-3 text-white shadow-sm ring-1 ring-inset ring-gray-300 bg-gray-800 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                                    </div>
                                </div>

                                <div class="sm:col-span-2 sm:col-start-1">
                                    <label for="city"
                                        class="block text-sm font-medium leading-6 text-white">City</label>
                                    <div class="mt-2">
                                        <input type="text" name="city" id="city" autocomplete="address-level2"
                                            placeholder="Los Angeles" value="{{ city }}"
                                            class="block w-full rounded-md border-0 py-1.5 pl-3 bg-gray-800 text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                                    </div>
                                </div>

                                <div class="sm:col-span-2">
                                    <label for="region" class="block text-sm font-medium leading-6 text-white">State /
                                        Province</label>
                                    <div class="mt-2">
                                        <input type="text" name="region" id="region" autocomplete="address-level1"
                                            placeholder="California" value="{{ state }}"
                                            class="block w-full rounded-md border-0 py-1.5 pl-3 bg-gray-800 text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                                    </div>
                                </div>

                                <div class="sm:col-span-2">
                                    <label for="postal-code" class="block text-sm font-medium leading-6 text-white">ZIP
                                        / Postal code</label>
                                    <div class="mt-2">
                                        <input type="text" name="postal-code" id="postal-code" value="{{ pincode }}"
                                            autocomplete="postal-code" placeholder="90001"
                                            class="block w-full rounded-md border-0 py-1.5 pl-3 bg-gray-800 text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="mt-3 pb-3 flex items-center justify-end gap-x-6">
                        <button type="button"
                            class=" hover:bg-gray-800 text-sm bg-transparent font-semibold leading-6 ring-1 ring-inset ring-gray-300 text-white block rounded-md border-0 py-1.5 pr-3 pl-3 bg-gray-800 shadow-sm focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">Cancel</button>
                        <button type="submit" id="submitButton"
                            class="rounded-md bg-violet-500 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:bg-violet-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Save</button>

                    </div>
                </form>

            </div>


        </div>
    </div>
</div>

<script>
    async function postData(url = "", data = {}) {
        const response = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
        });
        return response.json();
    }

    // Get the data from the id-'submitButton' of Image, About, Profession, Company, Country, Address, City, State and Pincode
    const submitButton = document.getElementById("submitButton");

    // Set the submit button to submit the form
    submitButton.addEventListener("click", async (e) => {
        e.preventDefault();
        // Get the data from the id-'submitButton' of Image, About, Profession, Company, Country, Address, City, State and Pincode
        const image = document.getElementById("image").value;
        const username = document.getElementById("username").value;
        const about = document.getElementById("about").value;
        const profession = document.getElementById("profession").value;
        const company = document.getElementById("company").value;
        const country = document.getElementById("country").value;
        const phone = document.getElementById("phone").value;
        const address = document.getElementById("street-address").value;
        const city = document.getElementById("city").value;
        const state = document.getElementById("region").value;
        const pincode = document.getElementById("postal-code").value;

        // Set the data to the variable 'data'
        const data = {
            image: image,
            username: username,
            about: about,
            profession: profession,
            company: company,
            country: country,
            phone: phone,
            address: address,
            city: city,
            state: state,
            pincode: pincode,
        };

        console.log(data)

        var r = confirm("Are you sure you want to Update your account?");
        if (r == true) {
            // post the request to delete this account
            window.location.href = "/profile";
        }
        // Post the data to the url-'update-profile' the redirect to 'url_for('main.profile')'
        await postData("/auth/edit_profile", { "data": data })
        // Redirect to the url-'profile'


    });


</script>


{% include 'footer.html' %}
{% endblock %}